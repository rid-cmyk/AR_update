// Mapping lengkap Juz, Surat, dan Ayat dalam Al-Quran
// Data ini digunakan untuk konversi antara target per Juz dengan hafalan per Surat

export const QURAN_MAPPING = {
  // Juz 1
  1: [
    { surat: "Al-Fatihah", ayatMulai: 1, ayatSelesai: 7, totalAyat: 7 },
    { surat: "Al-Baqarah", ayatMulai: 1, ayatSelesai: 141, totalAyat: 141 }
  ],
  
  // Juz 2  
  2: [
    { surat: "Al-Baqarah", ayatMulai: 142, ayatSelesai: 252, totalAyat: 111 }
  ],
  
  // Juz 3
  3: [
    { surat: "Al-Baqarah", ayatMulai: 253, ayatSelesai: 286, totalAyat: 34 },
    { surat: "Al-Imran", ayatMulai: 1, ayatSelesai: 92, totalAyat: 92 }
  ],
  
  // Juz 4
  4: [
    { surat: "Al-Imran", ayatMulai: 93, ayatSelesai: 200, totalAyat: 108 },
  ],
  
  // Juz 5
  5: [
    { surat: "An-Nisa", ayatMulai: 1, ayatSelesai: 147, totalAyat: 147 }
  ],
  
  // Juz 6
  6: [
    { surat: "An-Nisa", ayatMulai: 148, ayatSelesai: 176, totalAyat: 29 },
    { surat: "Al-Maidah", ayatMulai: 1, ayatSelesai: 81, totalAyat: 81 }
  ],
  
  // Juz 7
  7: [
    { surat: "Al-Maidah", ayatMulai: 82, ayatSelesai: 120, totalAyat: 39 },
    { surat: "Al-An'am", ayatMulai: 1, ayatSelesai: 110, totalAyat: 110 }
  ],
  
  // Juz 8
  8: [
    { surat: "Al-An'am", ayatMulai: 111, ayatSelesai: 165, totalAyat: 55 },
    { surat: "Al-A'raf", ayatMulai: 1, ayatSelesai: 87, totalAyat: 87 }
  ],
  
  // Juz 9
  9: [
    { surat: "Al-A'raf", ayatMulai: 88, ayatSelesai: 206, totalAyat: 119 },
    { surat: "Al-Anfal", ayatMulai: 1, ayatSelesai: 40, totalAyat: 40 }
  ],
  
  // Juz 10
  10: [
    { surat: "Al-Anfal", ayatMulai: 41, ayatSelesai: 75, totalAyat: 35 },
    { surat: "At-Taubah", ayatMulai: 1, ayatSelesai: 92, totalAyat: 92 }
  ],
  
  // Juz 11
  11: [
    { surat: "At-Taubah", ayatMulai: 93, ayatSelesai: 129, totalAyat: 37 },
    { surat: "Yunus", ayatMulai: 1, ayatSelesai: 109, totalAyat: 109 }
  ],
  
  // Juz 12
  12: [
    { surat: "Hud", ayatMulai: 1, ayatSelesai: 123, totalAyat: 123 },
    { surat: "Yusuf", ayatMulai: 1, ayatSelesai: 52, totalAyat: 52 }
  ],
  
  // Juz 13
  13: [
    { surat: "Yusuf", ayatMulai: 53, ayatSelesai: 111, totalAyat: 59 },
    { surat: "Ar-Ra'd", ayatMulai: 1, ayatSelesai: 43, totalAyat: 43 },
    { surat: "Ibrahim", ayatMulai: 1, ayatSelesai: 52, totalAyat: 52 }
  ],
  
  // Juz 14
  14: [
    { surat: "Al-Hijr", ayatMulai: 1, ayatSelesai: 99, totalAyat: 99 },
    { surat: "An-Nahl", ayatMulai: 1, ayatSelesai: 128, totalAyat: 128 }
  ],
  
  // Juz 15
  15: [
    { surat: "Al-Isra", ayatMulai: 1, ayatSelesai: 111, totalAyat: 111 },
    { surat: "Al-Kahf", ayatMulai: 1, ayatSelesai: 74, totalAyat: 74 }
  ],
  
  // Juz 16
  16: [
    { surat: "Al-Kahf", ayatMulai: 75, ayatSelesai: 110, totalAyat: 36 },
    { surat: "Maryam", ayatMulai: 1, ayatSelesai: 98, totalAyat: 98 },
    { surat: "Taha", ayatMulai: 1, ayatSelesai: 135, totalAyat: 135 }
  ],
  
  // Juz 17
  17: [
    { surat: "Al-Anbiya", ayatMulai: 1, ayatSelesai: 112, totalAyat: 112 },
    { surat: "Al-Hajj", ayatMulai: 1, ayatSelesai: 78, totalAyat: 78 }
  ],
  
  // Juz 18
  18: [
    { surat: "Al-Mu'minun", ayatMulai: 1, ayatSelesai: 118, totalAyat: 118 },
    { surat: "An-Nur", ayatMulai: 1, ayatSelesai: 64, totalAyat: 64 }
  ],
  
  // Juz 19
  19: [
    { surat: "Al-Furqan", ayatMulai: 1, ayatSelesai: 77, totalAyat: 77 },
    { surat: "Ash-Shu'ara", ayatMulai: 1, ayatSelesai: 227, totalAyat: 227 }
  ],
  
  // Juz 20
  20: [
    { surat: "An-Naml", ayatMulai: 1, ayatSelesai: 93, totalAyat: 93 },
    { surat: "Al-Qasas", ayatMulai: 1, ayatSelesai: 88, totalAyat: 88 }
  ],
  
  // Juz 21
  21: [
    { surat: "Al-Ankabut", ayatMulai: 1, ayatSelesai: 69, totalAyat: 69 },
    { surat: "Ar-Rum", ayatMulai: 1, ayatSelesai: 60, totalAyat: 60 },
    { surat: "Luqman", ayatMulai: 1, ayatSelesai: 34, totalAyat: 34 },
    { surat: "As-Sajdah", ayatMulai: 1, ayatSelesai: 30, totalAyat: 30 }
  ],
  
  // Juz 22
  22: [
    { surat: "Al-Ahzab", ayatMulai: 1, ayatSelesai: 73, totalAyat: 73 },
    { surat: "Saba", ayatMulai: 1, ayatSelesai: 54, totalAyat: 54 },
    { surat: "Fatir", ayatMulai: 1, ayatSelesai: 45, totalAyat: 45 }
  ],
  
  // Juz 23
  23: [
    { surat: "Yasin", ayatMulai: 1, ayatSelesai: 83, totalAyat: 83 },
    { surat: "As-Saffat", ayatMulai: 1, ayatSelesai: 182, totalAyat: 182 }
  ],
  
  // Juz 24
  24: [
    { surat: "Sad", ayatMulai: 1, ayatSelesai: 88, totalAyat: 88 },
    { surat: "Az-Zumar", ayatMulai: 1, ayatSelesai: 75, totalAyat: 75 }
  ],
  
  // Juz 25
  25: [
    { surat: "Ghafir", ayatMulai: 1, ayatSelesai: 85, totalAyat: 85 },
    { surat: "Fussilat", ayatMulai: 1, ayatSelesai: 54, totalAyat: 54 }
  ],
  
  // Juz 26
  26: [
    { surat: "Ash-Shura", ayatMulai: 1, ayatSelesai: 53, totalAyat: 53 },
    { surat: "Az-Zukhruf", ayatMulai: 1, ayatSelesai: 89, totalAyat: 89 },
    { surat: "Ad-Dukhan", ayatMulai: 1, ayatSelesai: 59, totalAyat: 59 }
  ],
  
  // Juz 27
  27: [
    { surat: "Al-Jathiyah", ayatMulai: 1, ayatSelesai: 37, totalAyat: 37 },
    { surat: "Al-Ahqaf", ayatMulai: 1, ayatSelesai: 35, totalAyat: 35 },
    { surat: "Muhammad", ayatMulai: 1, ayatSelesai: 38, totalAyat: 38 },
    { surat: "Al-Fath", ayatMulai: 1, ayatSelesai: 29, totalAyat: 29 },
    { surat: "Al-Hujurat", ayatMulai: 1, ayatSelesai: 18, totalAyat: 18 }
  ],
  
  // Juz 28
  28: [
    { surat: "Qaf", ayatMulai: 1, ayatSelesai: 45, totalAyat: 45 },
    { surat: "Adh-Dhariyat", ayatMulai: 1, ayatSelesai: 60, totalAyat: 60 },
    { surat: "At-Tur", ayatMulai: 1, ayatSelesai: 49, totalAyat: 49 },
    { surat: "An-Najm", ayatMulai: 1, ayatSelesai: 62, totalAyat: 62 },
    { surat: "Al-Qamar", ayatMulai: 1, ayatSelesai: 55, totalAyat: 55 },
    { surat: "Ar-Rahman", ayatMulai: 1, ayatSelesai: 78, totalAyat: 78 }
  ],
  
  // Juz 29
  29: [
    { surat: "Al-Waqi'ah", ayatMulai: 1, ayatSelesai: 96, totalAyat: 96 },
    { surat: "Al-Hadid", ayatMulai: 1, ayatSelesai: 29, totalAyat: 29 },
    { surat: "Al-Mujadilah", ayatMulai: 1, ayatSelesai: 22, totalAyat: 22 },
    { surat: "Al-Hashr", ayatMulai: 1, ayatSelesai: 24, totalAyat: 24 },
    { surat: "Al-Mumtahanah", ayatMulai: 1, ayatSelesai: 13, totalAyat: 13 },
    { surat: "As-Saff", ayatMulai: 1, ayatSelesai: 14, totalAyat: 14 },
    { surat: "Al-Jumu'ah", ayatMulai: 1, ayatSelesai: 11, totalAyat: 11 },
    { surat: "Al-Munafiqun", ayatMulai: 1, ayatSelesai: 11, totalAyat: 11 },
    { surat: "At-Taghabun", ayatMulai: 1, ayatSelesai: 18, totalAyat: 18 },
    { surat: "At-Talaq", ayatMulai: 1, ayatSelesai: 12, totalAyat: 12 },
    { surat: "At-Tahrim", ayatMulai: 1, ayatSelesai: 12, totalAyat: 12 }
  ],
  
  // Juz 30 (Juz Amma)
  30: [
    { surat: "Al-Mulk", ayatMulai: 1, ayatSelesai: 30, totalAyat: 30 },
    { surat: "Al-Qalam", ayatMulai: 1, ayatSelesai: 52, totalAyat: 52 },
    { surat: "Al-Haqqah", ayatMulai: 1, ayatSelesai: 52, totalAyat: 52 },
    { surat: "Al-Ma'arij", ayatMulai: 1, ayatSelesai: 44, totalAyat: 44 },
    { surat: "Nuh", ayatMulai: 1, ayatSelesai: 28, totalAyat: 28 },
    { surat: "Al-Jinn", ayatMulai: 1, ayatSelesai: 28, totalAyat: 28 },
    { surat: "Al-Muzzammil", ayatMulai: 1, ayatSelesai: 20, totalAyat: 20 },
    { surat: "Al-Muddaththir", ayatMulai: 1, ayatSelesai: 56, totalAyat: 56 },
    { surat: "Al-Qiyamah", ayatMulai: 1, ayatSelesai: 40, totalAyat: 40 },
    { surat: "Al-Insan", ayatMulai: 1, ayatSelesai: 31, totalAyat: 31 },
    { surat: "Al-Mursalat", ayatMulai: 1, ayatSelesai: 50, totalAyat: 50 },
    { surat: "An-Naba", ayatMulai: 1, ayatSelesai: 40, totalAyat: 40 },
    { surat: "An-Nazi'at", ayatMulai: 1, ayatSelesai: 46, totalAyat: 46 },
    { surat: "Abasa", ayatMulai: 1, ayatSelesai: 42, totalAyat: 42 },
    { surat: "At-Takwir", ayatMulai: 1, ayatSelesai: 29, totalAyat: 29 },
    { surat: "Al-Infitar", ayatMulai: 1, ayatSelesai: 19, totalAyat: 19 },
    { surat: "Al-Mutaffifin", ayatMulai: 1, ayatSelesai: 36, totalAyat: 36 },
    { surat: "Al-Inshiqaq", ayatMulai: 1, ayatSelesai: 25, totalAyat: 25 },
    { surat: "Al-Buruj", ayatMulai: 1, ayatSelesai: 22, totalAyat: 22 },
    { surat: "At-Tariq", ayatMulai: 1, ayatSelesai: 17, totalAyat: 17 },
    { surat: "Al-A'la", ayatMulai: 1, ayatSelesai: 19, totalAyat: 19 },
    { surat: "Al-Ghashiyah", ayatMulai: 1, ayatSelesai: 26, totalAyat: 26 },
    { surat: "Al-Fajr", ayatMulai: 1, ayatSelesai: 30, totalAyat: 30 },
    { surat: "Al-Balad", ayatMulai: 1, ayatSelesai: 20, totalAyat: 20 },
    { surat: "Ash-Shams", ayatMulai: 1, ayatSelesai: 15, totalAyat: 15 },
    { surat: "Al-Lail", ayatMulai: 1, ayatSelesai: 21, totalAyat: 21 },
    { surat: "Ad-Duha", ayatMulai: 1, ayatSelesai: 11, totalAyat: 11 },
    { surat: "Ash-Sharh", ayatMulai: 1, ayatSelesai: 8, totalAyat: 8 },
    { surat: "At-Tin", ayatMulai: 1, ayatSelesai: 8, totalAyat: 8 },
    { surat: "Al-Alaq", ayatMulai: 1, ayatSelesai: 19, totalAyat: 19 },
    { surat: "Al-Qadr", ayatMulai: 1, ayatSelesai: 5, totalAyat: 5 },
    { surat: "Al-Bayyinah", ayatMulai: 1, ayatSelesai: 8, totalAyat: 8 },
    { surat: "Az-Zalzalah", ayatMulai: 1, ayatSelesai: 8, totalAyat: 8 },
    { surat: "Al-Adiyat", ayatMulai: 1, ayatSelesai: 11, totalAyat: 11 },
    { surat: "Al-Qari'ah", ayatMulai: 1, ayatSelesai: 11, totalAyat: 11 },
    { surat: "At-Takathur", ayatMulai: 1, ayatSelesai: 8, totalAyat: 8 },
    { surat: "Al-Asr", ayatMulai: 1, ayatSelesai: 3, totalAyat: 3 },
    { surat: "Al-Humazah", ayatMulai: 1, ayatSelesai: 9, totalAyat: 9 },
    { surat: "Al-Fil", ayatMulai: 1, ayatSelesai: 5, totalAyat: 5 },
    { surat: "Quraish", ayatMulai: 1, ayatSelesai: 4, totalAyat: 4 },
    { surat: "Al-Ma'un", ayatMulai: 1, ayatSelesai: 7, totalAyat: 7 },
    { surat: "Al-Kawthar", ayatMulai: 1, ayatSelesai: 3, totalAyat: 3 },
    { surat: "Al-Kafirun", ayatMulai: 1, ayatSelesai: 6, totalAyat: 6 },
    { surat: "An-Nasr", ayatMulai: 1, ayatSelesai: 3, totalAyat: 3 },
    { surat: "Al-Masad", ayatMulai: 1, ayatSelesai: 5, totalAyat: 5 },
    { surat: "Al-Ikhlas", ayatMulai: 1, ayatSelesai: 4, totalAyat: 4 },
    { surat: "Al-Falaq", ayatMulai: 1, ayatSelesai: 5, totalAyat: 5 },
    { surat: "An-Nas", ayatMulai: 1, ayatSelesai: 6, totalAyat: 6 }
  ]
};

// Helper functions untuk konversi
export const QuranUtils = {
  // Konversi hafalan surat ke progress juz
  calculateJuzProgressFromSurat: (hafalanData) => {
    const juzProgress = {};
    
    // Initialize semua juz dengan 0%
    for (let i = 1; i <= 30; i++) {
      juzProgress[i] = {
        juz: i,
        totalAyat: 0,
        hafalAyat: 0,
        progress: 0,
        details: []
      };
    }
    
    // Hitung total ayat per juz
    for (let juz = 1; juz <= 30; juz++) {
      const juzData = QURAN_MAPPING[juz];
      juzProgress[juz].totalAyat = juzData.reduce((sum, item) => sum + item.totalAyat, 0);
    }
    
    // Hitung progress berdasarkan hafalan
    hafalanData.forEach(hafalan => {
      const { surat, ayatMulai, ayatSelesai } = hafalan;
      
      // Cari di juz mana surat ini berada
      for (let juz = 1; juz <= 30; juz++) {
        const juzData = QURAN_MAPPING[juz];
        const suratInJuz = juzData.find(item => item.surat === surat);
        
        if (suratInJuz) {
          // Hitung overlap antara hafalan dengan bagian surat di juz ini
          const overlapStart = Math.max(ayatMulai, suratInJuz.ayatMulai);
          const overlapEnd = Math.min(ayatSelesai, suratInJuz.ayatSelesai);
          
          if (overlapStart <= overlapEnd) {
            const hafalAyatInJuz = overlapEnd - overlapStart + 1;
            juzProgress[juz].hafalAyat += hafalAyatInJuz;
            
            juzProgress[juz].details.push({
              surat,
              ayatMulai: overlapStart,
              ayatSelesai: overlapEnd,
              jumlahAyat: hafalAyatInJuz
            });
          }
        }
      }
    });
    
    // Hitung persentase progress
    for (let juz = 1; juz <= 30; juz++) {
      if (juzProgress[juz].totalAyat > 0) {
        juzProgress[juz].progress = Math.round(
          (juzProgress[juz].hafalAyat / juzProgress[juz].totalAyat) * 100
        );
      }
    }
    
    return juzProgress;
  },
  
  // Konversi target juz ke rencana surat
  convertJuzTargetToSuratPlan: (targetJuzList) => {
    const suratPlan = {};
    
    targetJuzList.forEach(juz => {
      const juzData = QURAN_MAPPING[juz];
      
      juzData.forEach(item => {
        const { surat, ayatMulai, ayatSelesai } = item;
        
        if (!suratPlan[surat]) {
          suratPlan[surat] = {
            surat,
            segments: [],
            totalAyatTarget: 0
          };
        }
        
        suratPlan[surat].segments.push({
          juz,
          ayatMulai,
          ayatSelesai,
          jumlahAyat: ayatSelesai - ayatMulai + 1
        });
        
        suratPlan[surat].totalAyatTarget += (ayatSelesai - ayatMulai + 1);
      });
    });
    
    return suratPlan;
  },
  
  // Get juz info
  getJuzInfo: (juzNumber) => {
    return QURAN_MAPPING[juzNumber] || [];
  },
  
  // Get surat info (di juz mana saja surat ini berada)
  getSuratJuzInfo: (suratName) => {
    const result = [];
    
    for (let juz = 1; juz <= 30; juz++) {
      const juzData = QURAN_MAPPING[juz];
      const suratInJuz = juzData.find(item => item.surat === suratName);
      
      if (suratInJuz) {
        result.push({
          juz,
          ...suratInJuz
        });
      }
    }
    
    return result;
  }
};