# Mushaf Digital - 15 Baris Standard (Mushaf Utsmani)

## ✅ Implementasi Selesai

### Overview
Mushaf Digital sekarang mengikuti standar Mushaf Utsmani dengan format:
- **15 baris per halaman** (halaman 3-604)
- **Halaman 1**: Al-Fatihah lengkap (1 halaman penuh)
- **Halaman 2**: Al-Baqarah ayat 1-5 (1 halaman penuh)

---

## Struktur Halaman

### Halaman 1: Al-Fatihah (Khusus)
```
┌─────────────────────────────────────┐
│         صفحة 1 - جزء 1              │
├─────────────────────────────────────┤
│                                     │
│         ﴿ الفاتحة ﴾                 │
│                                     │
│   بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ   │
│                                     │
│   الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ ﴿١﴾  │
│   الرَّحْمَٰنِ الرَّحِيمِ ﴿٢﴾            │
│   مَالِكِ يَوْمِ الدِّينِ ﴿٣﴾          │
│   إِيَّاكَ نَعْبُدُ وَإِيَّاكَ نَسْتَعِينُ ﴿٤﴾ │
│   اهْدِنَا الصِّرَاطَ الْمُسْتَقِيمَ ﴿٥﴾   │
│   صِرَاطَ الَّذِينَ أَنْعَمْتَ عَلَيْهِمْ ﴿٦﴾ │
│   غَيْرِ الْمَغْضُوبِ عَلَيْهِمْ        │
│   وَلَا الضَّالِّينَ ﴿٧﴾              │
│                                     │
└─────────────────────────────────────┘
```

**Karakteristik:**
- ✅ 1 halaman penuh untuk Al-Fatihah
- ✅ Layout centered dan indah
- ✅ Tidak mengikuti aturan 15 baris
- ✅ Bismillah ditampilkan

### Halaman 2: Al-Baqarah 1-5 (Khusus)
```
┌─────────────────────────────────────┐
│         صفحة 2 - جزء 1              │
├─────────────────────────────────────┤
│                                     │
│         ﴿ البقرة ﴾                  │
│                                     │
│   بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ   │
│                                     │
│   الم ﴿١﴾                           │
│   ذَٰلِكَ الْكِتَابُ لَا رَيْبَ ۛ فِيهِ ۛ  │
│   هُدًى لِّلْمُتَّقِينَ ﴿٢﴾            │
│   الَّذِينَ يُؤْمِنُونَ بِالْغَيْبِ      │
│   وَيُقِيمُونَ الصَّلَاةَ وَمِمَّا رَزَقْنَاهُمْ │
│   يُنفِقُونَ ﴿٣﴾                     │
│   وَالَّذِينَ يُؤْمِنُونَ بِمَا أُنزِلَ إِلَيْكَ │
│   وَمَا أُنزِلَ مِن قَبْلِكَ وَبِالْآخِرَةِ │
│   هُمْ يُوقِنُونَ ﴿٤﴾                 │
│   أُولَٰئِكَ عَلَىٰ هُدًى مِّن رَّبِّهِمْ ۖ │
│   وَأُولَٰئِكَ هُمُ الْمُفْلِحُونَ ﴿٥﴾   │
│                                     │
└─────────────────────────────────────┘
```

**Karakteristik:**
- ✅ 1 halaman penuh untuk 5 ayat pertama
- ✅ Layout khusus
- ✅ Tidak mengikuti aturan 15 baris
- ✅ Bismillah ditampilkan

### Halaman 3+: Standard 15 Baris
```
┌─────────────────────────────────────┐
│         صفحة 3 - جزء 1              │
├─────────────────────────────────────┤
│ [Baris 1]  إِنَّ الَّذِينَ كَفَرُوا... ﴿٦﴾ │
│ [Baris 2]  خَتَمَ اللَّهُ عَلَىٰ قُلُوبِهِمْ... │
│ [Baris 3]  وَمِنَ النَّاسِ مَن يَقُولُ... ﴿٨﴾ │
│ [Baris 4]  يُخَادِعُونَ اللَّهَ وَالَّذِينَ... │
│ [Baris 5]  فِي قُلُوبِهِم مَّرَضٌ... ﴿١٠﴾   │
│ [Baris 6]  وَإِذَا قِيلَ لَهُمْ لَا تُفْسِدُوا... │
│ [Baris 7]  أَلَا إِنَّهُمْ هُمُ الْمُفْسِدُونَ... │
│ [Baris 8]  وَإِذَا قِيلَ لَهُمْ آمِنُوا... ﴿١٣﴾ │
│ [Baris 9]  وَإِذَا لَقُوا الَّذِينَ آمَنُوا... │
│ [Baris 10] اللَّهُ يَسْتَهْزِئُ بِهِمْ... ﴿١٥﴾ │
│ [Baris 11] أُولَٰئِكَ الَّذِينَ اشْتَرَوُا... │
│ [Baris 12] مَثَلُهُمْ كَمَثَلِ الَّذِي... ﴿١٧﴾ │
│ [Baris 13] صُمٌّ بُكْمٌ عُمْيٌ... ﴿١٨﴾      │
│ [Baris 14] أَوْ كَصَيِّبٍ مِّنَ السَّمَاءِ... │
│ [Baris 15] يَكَادُ الْبَرْقُ يَخْطَفُ... ﴿٢٠﴾ │
└─────────────────────────────────────┘
```

**Karakteristik:**
- ✅ 15 baris per halaman
- ✅ Format justified (rata kanan-kiri)
- ✅ Line height: 2.5em
- ✅ Font: Amiri (Traditional Arabic)
- ✅ Sesuai Mushaf Utsmani standard

---

## API Implementation

### Special Pages Handler
```typescript
const SPECIAL_PAGES = {
  1: {
    type: 'al-fatihah',
    suratId: 1,
    ayatStart: 1,
    ayatEnd: 7
  },
  2: {
    type: 'al-baqarah-opening',
    suratId: 2,
    ayatStart: 1,
    ayatEnd: 5
  }
};

// Check if page is special
if (page === 1 || page === 2) {
  return await generateSpecialPageContent(page);
}

// Otherwise, generate standard 15-line page
return await generateStandardPageContent(page);
```

### Standard Page Handler
```typescript
const LINES_PER_PAGE = 15;

// Calculate ayat distribution
const ayatPerPage = Math.ceil(allAyat.length / totalPages);

// Format with 15-line limit
pageAyat.forEach((ayat, index) => {
  if (lineCount < LINES_PER_PAGE || index < 5) {
    lines.push(`${ayat.teksArab} ﴿${ayat.nomorAyat}﴾`);
    lineCount++;
  }
});
```

---

## UI Styling

### Line Height & Spacing
```typescript
style={{
  lineHeight: '2.5em',        // Mushaf Utsmani standard
  minHeight: 55,              // Per line
  padding: '10px 16px',       // Comfortable spacing
  fontSize: '1.3em',          // Readable size
  wordSpacing: '0.3em',       // Arabic spacing
  letterSpacing: '0.02em'     // Subtle spacing
}}
```

### Font Family
```typescript
fontFamily: 'Amiri, "Traditional Arabic", serif'
```

### Text Direction
```typescript
direction: 'rtl',             // Right-to-left
textAlign: 'justify'          // Justified alignment
```

### Special Elements
```typescript
// Bismillah
fontSize: '2em',
fontWeight: 700,
color: '#047857',
textAlign: 'center'

// Surat Name
fontSize: '1.6em',
fontWeight: 600,
color: '#d97706',
background: 'rgba(217, 119, 6, 0.05)'

// Regular Ayat
fontSize: '1.3em',
fontWeight: 400,
color: '#1f2937'
```

---

## Page Distribution

### Juz 1 (21 halaman)
```
Halaman 1:  Al-Fatihah 1-7 (khusus)
Halaman 2:  Al-Baqarah 1-5 (khusus)
Halaman 3:  Al-Baqarah 6-... (15 baris)
Halaman 4:  Al-Baqarah ... (15 baris)
...
Halaman 21: Al-Baqarah ... (15 baris)
```

### Juz 2-30 (halaman 22-604)
```
Setiap halaman: 15 baris standard
```

---

## Benefits

### Accuracy
- ✅ Sesuai Mushaf Utsmani standard
- ✅ 15 baris per halaman (kecuali khusus)
- ✅ Layout familiar untuk penghafal

### Readability
- ✅ Line height optimal (2.5em)
- ✅ Font Traditional Arabic (Amiri)
- ✅ Justified alignment
- ✅ Proper spacing

### User Experience
- ✅ Halaman khusus untuk Al-Fatihah
- ✅ Halaman khusus untuk Al-Baqarah 1-5
- ✅ Konsisten dengan mushaf fisik
- ✅ Mudah untuk hafalan

---

## Testing Checklist

### Special Pages
- [ ] Halaman 1: Al-Fatihah lengkap
- [ ] Halaman 2: Al-Baqarah 1-5
- [ ] Layout centered dan indah
- [ ] Bismillah ditampilkan

### Standard Pages
- [ ] Halaman 3+: 15 baris
- [ ] Line height konsisten
- [ ] Font Amiri diterapkan
- [ ] Justified alignment
- [ ] Ayat terdistribusi dengan benar

### Visual Quality
- [ ] Text readable di semua zoom level
- [ ] Spacing comfortable
- [ ] Colors appropriate
- [ ] RTL direction correct

---

## API Endpoints

### Get Special Page
```bash
GET /api/mushaf?page=1
# Returns: Al-Fatihah full page

GET /api/mushaf?page=2
# Returns: Al-Baqarah 1-5 full page
```

### Get Standard Page
```bash
GET /api/mushaf?page=3
# Returns: 15-line standard page

GET /api/mushaf?page=100
# Returns: 15-line standard page
```

---

## Example Response

### Page 1 (Special)
```json
{
  "success": true,
  "data": {
    "page": 1,
    "juz": 1,
    "content": "﴿ الفاتحة ﴾\n\nبِسْمِ اللَّهِ...",
    "surahInfo": "الفاتحة",
    "ayatRange": "آية 1-7",
    "pageInfo": {
      "isSpecialPage": true,
      "specialType": "al-fatihah",
      "ayatCount": 7
    }
  }
}
```

### Page 3 (Standard)
```json
{
  "success": true,
  "data": {
    "page": 3,
    "juz": 1,
    "content": "إِنَّ الَّذِينَ كَفَرُوا...",
    "surahInfo": "البقرة",
    "ayatRange": "آية 6-15",
    "pageInfo": {
      "isSpecialPage": false,
      "linesPerPage": 15,
      "ayatCount": 10
    }
  }
}
```

---

## Visual Comparison

### Before (Generic)
```
❌ Tidak ada halaman khusus
❌ Distribusi ayat tidak akurat
❌ Tidak mengikuti 15 baris
❌ Layout tidak sesuai mushaf
```

### After (Mushaf Utsmani)
```
✅ Halaman 1: Al-Fatihah khusus
✅ Halaman 2: Al-Baqarah 1-5 khusus
✅ Halaman 3+: 15 baris standard
✅ Layout sesuai mushaf fisik
✅ Font Traditional Arabic
✅ Line height optimal
✅ Justified alignment
```

---

## Future Enhancements

### Planned
- [ ] Exact mushaf page matching
- [ ] Tajwid color coding
- [ ] Rub', Nisf, Thalatha markers
- [ ] Sajdah markers
- [ ] Hizb markers

### Advanced
- [ ] Multiple mushaf styles (Madinah, Indonesia)
- [ ] Custom line count (13, 15, 17 lines)
- [ ] Print-friendly view
- [ ] High-resolution images

---

**Status**: ✅ Implemented
**Version**: 1.0.0
**Standard**: Mushaf Utsmani
**Last Updated**: November 2025

---

**Developed with ❤️ for Islamic Education**
